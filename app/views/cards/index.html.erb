<center>Here's a list of Magic cards</center>
<div class="pagebackground">
  <div id="droppable" class="ui-widget-header" style="width: 400px; height: 400px; border: 1px solid black;">
  <h5>Drag image here: Collection</h5>
 </div>

  <% @cards.each do |card| %>
    <div>
    <h5>Card Name: <%= card.name %></h5>
    <img class="draggable" src="<%= card.image_url %>" data-api-id="<%= card.id %>" data-user-id="<%= current_user.id %>" >

    <%= form_tag "/deck_cards", method: :post do %>
      <%= hidden_field_tag :card_id, card.id %>
      Quantity: <%= number_field_tag :quantity %>
      <%= collection_select(:deck, :id, current_user.decks, :id, :name) %>
      <%= submit_tag "Add to Deck" %>
    <% end %>
    </div>
  <% end %>

  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    $( ".draggable" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
       // do something with the draggable item
       var user_id = (ui.draggable).data("user-id");
       var card_id = (ui.draggable).data("api-id");
       $.post( "/collection", { user_id: user_id, card_id: card_id, quantity: 1} );
       (ui.draggable).addClass("animateCard");
      }
    });
  } );
  </script>
</div>


